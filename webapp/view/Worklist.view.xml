<mvc:View
    controllerName="zorder.request.zorderrequest.controller.Worklist"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:semantic="sap.m.semantic"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form">
    <SplitContainer>
        <masterPages>
            <semantic:MasterPage title="Solicitudes de Pedido">
				<semantic:landmarkInfo>
					<PageAccessibleLandmarkInfo rootLabel="Root label" headerLabel="Header label" footerLabel="Footer label"></PageAccessibleLandmarkInfo>
				</semantic:landmarkInfo>
				<semantic:content>
                    <List
                        id="list"
                        width="auto"
                        class="sapFDynamicPageAlignContent"
                        mode="SingleSelectMaster"
                        items="{
                            path: 'ListModel>/',
                            sorter: { path: 'Banfn', descending: true},
                            groupHeaderFactory: '.createGroupHeader'
                        }"
                        headerText="{worklistView>/title}"
                        busyIndicatorDelay="{listView>/delay}"
                        noDataText="{listView>/noDataText}"
                        growing="true"
                        growingScrollToLoad="true"
                        updateFinished=".onUpdateFinished"
                        selectionChange=".onSelectionChange">
                        <headerToolbar>
                            <OverflowToolbar>
                                <SearchField
                                    id="searchField"
                                    tooltip="{i18n>listSearchTooltip}"
                                    search=".onSearch"
                                    width="auto">
                                    <layoutData>
                                        <OverflowToolbarLayoutData
                                            minWidth="150px"
                                            maxWidth="240px"
                                            shrinkable="true"
                                            priority="NeverOverflow"/>
                                    </layoutData>
                                </SearchField>
                                <ToolbarSpacer/>
                            </OverflowToolbar>
                        </headerToolbar>
                        <ObjectListItem
                            
                            title="{ListModel>Banfn}"
                            type="Active"
                            press=".onSelectionChange"
                            number="{
                                parts:[{path:'ListModel>Rlwrt'},{path:'ListModel>Waers'}],
                                type: 'sap.ui.model.type.Currency',
                                formatOptions: {showMeasure: false}
                            }"
                            numberUnit="{ListModel>Waers}">
                            <attributes>
                                <ObjectAttribute id="UserName" text="{ListModel>Ernam}" />
                                <ObjectAttribute id="date" text="{path : 'ListModel>Erdat', type: 'sap.ui.model.odata.type.DateTime' , formatOptions: { pattern: 'dd-MM-yyyy', UTC: true } }" />
                                <ObjectAttribute id="Pos"  text="Items: {ListModel>Posiciones}" />
                            </attributes>
                        </ObjectListItem>
                    </List>
                                
                </semantic:content>
			</semantic:MasterPage>
        </masterPages>
        <detailPages>
			<semantic:DetailPage title="Detalle de Solicitud de Pedido">
              
                <semantic:content>
                    <l:BlockLayout background="Mixed" >
                        <l:BlockLayoutRow scrollable="false">
                            <l:BlockLayoutCell  >
                                <ObjectHeader
                                    binding="{orderModel>/}"
                                    title="{orderModel>Banfn}"
                                    titleActive="true"
                                    number="{
                                        parts:[{path:'orderModel>Rlwrt'},{path:'orderModel>Waers'}],
                                        type: 'sap.ui.model.type.Currency',
                                        formatOptions: {showMeasure: false}
                                    }"
                                    numberUnit="{orderModel>Waers}"
                                    class="sapUiResponsivePadding--header" >
                                    <ObjectAttribute active="true" title="Usuario" text="{orderModel>/Ernam}" />
                                    <ObjectAttribute title="Usuario SAP" text="{orderModel>/Uname}" />
                                    <ObjectAttribute title="Fecha Solicitud" text="{path : 'orderModel>/Erdat', type: 'sap.ui.model.odata.type.DateTime' , formatOptions: { pattern: 'dd-MM-yyyy', UTC: true } }" />
                                    <ObjectAttribute title="Tipo Documento" text="{orderModel>/Bsart} - {orderModel>/Batxt}" />
                                    <ObjectAttribute title="{i18n>Plant}" text="{orderModel>/Werks} - {orderModel>/NameWerks}" />
                                    <ObjectAttribute title="{i18n>Almacen}" text="{orderModel>/Lgort} - {orderModel>/NameLgort}" />
                                    
                                </ObjectHeader>
                            </l:BlockLayoutCell>
                        </l:BlockLayoutRow>
                    </l:BlockLayout>
                    <l:VerticalLayout width="100%">
                        <IconTabBar
                            id="iconTabBar"
                            headerBackgroundDesign="Transparent"
                            select=".onTabSelect"
                            selectedKey="{detailView>/selectedTab}">
                            <items>
                                <IconTabFilter
                                    id="iconTabFilterShipping"
                                    icon="sap-icon://message-information"
                                    tooltip="{i18n>detailIconTabBarInfo}"
                                    key="Items">
                                    <content>
                                        <Table
                                            id="lineItemsList"
                                            class="sapUiSmallMarginTop"
                                            width="auto"
                                            mode="SingleSelectMaster"
                                            selectionChange="handleSelectionChange"
                                            items="{path: 'ListdetailModel>/'}"
                                            noDataText="{i18n>noDataRequest}"
                                            busyIndicatorDelay="{detailView>/lineItemTableDelay}">
                                            <headerToolbar>
                                                <Toolbar id="lineItemsToolbar">
                                                    <Title
                                                        id="lineItemsHeader"
                                                        text="Items"/>
                                                </Toolbar>
                                            </headerToolbar>
                                            <columns>
                                                 <Column>
                                                    <Text text="{i18n>Pos}"/>
                                                </Column>
                                                <Column >
                                                    <Text text="{i18n>NoMat}"/>
                                                </Column>
                                                <Column>
                                                    <Text text="{i18n>DescMat}"/>
                                                </Column>
                                                <Column>
                                                    <Text text="{i18n>Quantity}"/>
                                                </Column>
                                                <Column>
                                                    <Text text="{i18n>Imp}"/>
                                                </Column>
                                                <Column>
                                                    <Text text="{i18n>Subtot}"/>
                                                </Column>
                                                <Column>
                                                    <Text text="{i18n>FecEnt}"/>
                                                </Column>
                                                 
                                            </columns>
                                            <items>
                                                <ColumnListItem  type="Navigation" press=".onPress">
                                                    <cells>
                                                        <ObjectAttribute
                                                             text="{ListdetailModel>Bnfpo}"/>
                                                        <ObjectIdentifier
                                                           text="{ListdetailModel>Matnr}"/>  
                                                        <ObjectIdentifier
                                                            text="{ListdetailModel>Txz01}"/>   
                                                        <ObjectNumber
                                                            number="{
                                                                path: 'ListdetailModel>Menge'
                                                            }"
                                                            unit="{ListdetailModel>Meins}"/>
                                                        <ObjectNumber
                                                            number="{
                                                                path: 'ListdetailModel>Rlwrt',
                                                                formatter: '.formatter.currencyValue'
                                                            }"
                                                            unit="{ListdetailModel>Waers}"/>
                                                        <ObjectAttribute
                                                            text="$ {path:'ListdetailModel>Total', type: 'sap.ui.model.type.Float', formatOptions: { minFractionDigits: 2, maxFractionDigits: 2, groupingSeparator: ',', decimalSeparator: '.' }}"/>
                                                        <ObjectIdentifier
                                                            text=" {path : 'ListdetailModel>Lfdat', type: 'sap.ui.model.odata.type.DateTime' , formatOptions: { pattern: 'dd-MM-yyyy', UTC: true } }"/>
                                                    </cells>
                                                </ColumnListItem>
                                            </items>
                                        </Table>
                                    </content>
                                </IconTabFilter>
                                <IconTabFilter
                                    id="iconTabFilterAttach"
                                    icon="sap-icon://attachment"
                                    tooltip="{i18n>detailIconTabBarAttachments}"
                                    
                                    key="attach">
                                    <content >
                                        <List
                                            id="ShortAttachments"
                                            headerText="Adjuntos"
                                            items="{path: 'ListAttachModel>/'}"
                                            noDataText="{i18n>noDataRequest}">
                                            <items>
                                                <StandardListItem 	
                                                    title="{ListAttachModel>Banfn}"
                                                    description="{ListAttachModel>ObjType}"
                                                    icon="{ListAttachModel>Icon}"
                                                    iconDensityAware="false"
                                                    iconInset="false"
                                                    type="Navigation"
                                                    press="handleSelectionAttach"/>
                                            </items>
                                        </List>
                                    </content>
                                </IconTabFilter>
                            </items>
                        </IconTabBar>
                        
                    </l:VerticalLayout>
                </semantic:content>
                <semantic:positiveAction>
                    <semantic:PositiveAction text="Aprobar" press="onPressAction(1)"/>
                </semantic:positiveAction>
                <semantic:negativeAction>
                    <semantic:NegativeAction text="Rechazar" press="onPressAction(0)"/>
                </semantic:negativeAction>
			</semantic:DetailPage>

		</detailPages>
    </SplitContainer>
   
</mvc:View>